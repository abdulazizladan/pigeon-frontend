<div class="page-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1>Manager Profile</h1>
    <p>View and manage manager details and assignments</p>
  </div>

  @if(managersStore.loading()) {
  <div class="loading-state">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>
  } @else {
  <div class="details-grid">

    <!-- Left Column: Main Profile Card -->
    <div class="card-base profile-card">
      <div class="profile-header">
        <div class="avatar-placeholder">
          {{ managersStore.selectedManager()?.info?.firstName?.charAt(0) }}
        </div>
        <div class="profile-identity">
          <h2>
            {{ managersStore.selectedManager()?.info?.firstName | titlecase }}
            {{ managersStore.selectedManager()?.info?.lastName | titlecase }}
          </h2>
          <span class="status-chip" [ngClass]="managersStore.selectedManager()?.status?.toLowerCase() || 'pending'">
            {{ managersStore.selectedManager()?.status || 'Active' }}
          </span>
        </div>
      </div>

      <div class="profile-actions">
        <!-- Placeholder for future actions like Edit Profile -->
      </div>
    </div>

    <!-- Right Column: Information Grid -->
    <div class="info-column">

      <!-- Contact Information -->
      <div class="card-base section-card">
        <div class="card-header">
          <h3>Contact Information</h3>
        </div>
        <div class="card-body">
          <div class="info-row">
            <span class="label">Email Address</span>
            <span class="value">{{ managersStore.selectedManager()?.email }}</span>
          </div>
          <div class="info-row">
            <span class="label">Phone Number</span>
            <span class="value">{{ managersStore.selectedManager()?.contact?.phone || 'N/A' }}</span>
          </div>
          <div class="info-row">
            <span class="label">Last Updated</span>
            <span class="value">{{ managersStore.selectedManager()?.lastUpdated | date:'mediumDate' }}</span>
          </div>
        </div>
      </div>

      <!-- Station Assignment -->
      <div class="card-base section-card">
        <div class="card-header">
          <h3>Station Assignment</h3>
          @if(managersStore.selectedManager()?.station) {
          <span class="status-chip active">Assigned</span>
          } @else {
          <span class="status-chip inactive">Unassigned</span>
          }
        </div>

        <div class="card-body">
          @if(managersStore.selectedManager()?.station) {
          <div class="station-preview">
            <div class="station-icon">
              <mat-icon>local_gas_station</mat-icon>
            </div>
            <div class="station-details">
              <h4>{{ managersStore.selectedManager()?.station?.name }}</h4>
              <p>
                {{ managersStore.selectedManager()?.station?.address }},
                {{ managersStore.selectedManager()?.station?.lga | titlecase }},
                {{ managersStore.selectedManager()?.station?.state | titlecase }}
              </p>
            </div>
          </div>
          <div class="action-footer">
            <button mat-stroked-button color="warn">Unassign Station</button>
          </div>
          } @else {
          <div class="empty-state">
            <p>This manager is not currently assigned to any station.</p>
            <button mat-flat-button color="primary" (click)="openAssignStationDialog()">
              Assign to Station
            </button>
          </div>
          }
        </div>
      </div>

    </div>
  </div>
  }
</div>